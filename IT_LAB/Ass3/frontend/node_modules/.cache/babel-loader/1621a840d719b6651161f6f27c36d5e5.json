{"ast":null,"code":"var _jsxFileName = \"/home/soham/Documents/7th_Sem/IT_LAB/Ass3/frontend/src/App.js\";\nimport React, { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport LoginModal from './components/LoginModal';\nimport ChatPage from './components/ChatPage';\nimport socketIOClient from \"socket.io-client\";\nimport './App.css';\nlet socket;\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: null,\n      group: null,\n      endpoint: \"http://192.168.0.14:3005\",\n      messages: []\n    };\n    socket = socketIOClient(this.state.endpoint);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSendUsername = this.handleSendUsername.bind(this);\n    this.handleSendMessage = this.handleSendMessage.bind(this);\n    this.newMessage = this.newMessage.bind(this);\n  }\n\n  newMessage(msg) {\n    const messages = [...this.state.messages];\n    if (messages === null) messages = [msg];else messages.push(msg);\n    this.setState({\n      messages: messages\n    });\n  }\n\n  componentDidMount() {\n    socket.on(\"new_message\", this.newMessage);\n  }\n\n  componentWillUnmount() {\n    socket.off(\"new_message\");\n  }\n\n  handleSendUsername() {\n    socket.emit(\"new_user\", this.state.username);\n  }\n\n  handleSendMessage(msg) {\n    const data = {\n      \"message\": msg,\n      \"group\": this.state.group,\n      \"username\": this.state.username\n    };\n    socket.emit(\"send_message\", data);\n  }\n\n  handleChange(userName, lobby) {\n    this.setState({\n      username: userName,\n      group: lobby\n    }, () => {\n      this.handleSendUsername();\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"main-page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(ChatPage, {\n      username: this.state.username,\n      group: this.state.group,\n      messages: this.state.messages,\n      handleSend: this.handleSendMessage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), React.createElement(LoginModal, {\n      handleChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/soham/Documents/7th_Sem/IT_LAB/Ass3/frontend/src/App.js"],"names":["React","Component","LoginModal","ChatPage","socketIOClient","socket","App","constructor","props","state","username","group","endpoint","messages","handleChange","bind","handleSendUsername","handleSendMessage","newMessage","msg","push","setState","componentDidMount","on","componentWillUnmount","off","emit","data","userName","lobby","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,sCAAP;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAO,WAAP;AAEA,IAAIC,MAAJ;AAGA,eAAe,MAAMC,GAAN,SAAkBL,SAAlB,CAA4B;AAEzCM,EAAAA,WAAW,CAACC,KAAD,EAAO;AAChB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,QAAQ,EAAE,IADC;AAEXC,MAAAA,KAAK,EAAE,IAFI;AAGXC,MAAAA,QAAQ,EAAE,0BAHC;AAIXC,MAAAA,QAAQ,EAAE;AAJC,KAAb;AAOAR,IAAAA,MAAM,GAAGD,cAAc,CAAC,KAAKK,KAAL,CAAWG,QAAZ,CAAvB;AACA,SAAKE,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBD,IAAxB,CAA6B,IAA7B,CAA1B;AACA,SAAKE,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBF,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKG,UAAL,GAAkB,KAAKA,UAAL,CAAgBH,IAAhB,CAAqB,IAArB,CAAlB;AACD;;AAEDG,EAAAA,UAAU,CAACC,GAAD,EAAK;AACb,UAAMN,QAAQ,GAAG,CAAC,GAAG,KAAKJ,KAAL,CAAWI,QAAf,CAAjB;AACA,QAAGA,QAAQ,KAAK,IAAhB,EAAsBA,QAAQ,GAAG,CAACM,GAAD,CAAX,CAAtB,KACKN,QAAQ,CAACO,IAAT,CAAcD,GAAd;AACL,SAAKE,QAAL,CAAc;AAACR,MAAAA,QAAQ,EAAEA;AAAX,KAAd;AACD;;AAEDS,EAAAA,iBAAiB,GAAE;AACjBjB,IAAAA,MAAM,CAACkB,EAAP,CAAU,aAAV,EAAyB,KAAKL,UAA9B;AACD;;AAEDM,EAAAA,oBAAoB,GAAE;AACpBnB,IAAAA,MAAM,CAACoB,GAAP,CAAW,aAAX;AACD;;AAEDT,EAAAA,kBAAkB,GAAE;AAElBX,IAAAA,MAAM,CAACqB,IAAP,CAAY,UAAZ,EAAwB,KAAKjB,KAAL,CAAWC,QAAnC;AACD;;AAEDO,EAAAA,iBAAiB,CAACE,GAAD,EAAK;AACpB,UAAMQ,IAAI,GAAG;AACX,iBAAWR,GADA;AAEX,eAAS,KAAKV,KAAL,CAAWE,KAFT;AAGX,kBAAY,KAAKF,KAAL,CAAWC;AAHZ,KAAb;AAMAL,IAAAA,MAAM,CAACqB,IAAP,CAAY,cAAZ,EAA4BC,IAA5B;AACD;;AAEDb,EAAAA,YAAY,CAACc,QAAD,EAAWC,KAAX,EAAiB;AAC3B,SAAKR,QAAL,CAAc;AAACX,MAAAA,QAAQ,EAAEkB,QAAX;AAAqBjB,MAAAA,KAAK,EAAEkB;AAA5B,KAAd,EAAkD,MAAM;AAAC,WAAKb,kBAAL;AAA0B,KAAnF;AACD;;AAEDc,EAAAA,MAAM,GAAG;AACP,WACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,QAAD;AACA,MAAA,QAAQ,EAAE,KAAKrB,KAAL,CAAWC,QADrB;AAEA,MAAA,KAAK,EAAE,KAAKD,KAAL,CAAWE,KAFlB;AAGA,MAAA,QAAQ,EAAE,KAAKF,KAAL,CAAWI,QAHrB;AAIA,MAAA,UAAU,EAAE,KAAKI,iBAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAME,oBAAC,UAAD;AAAY,MAAA,YAAY,EAAE,KAAKH,YAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANF,CADF;AAUD;;AA/DwC","sourcesContent":["import React, { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport LoginModal from './components/LoginModal';\nimport ChatPage from './components/ChatPage';\nimport socketIOClient from \"socket.io-client\";\nimport './App.css';\n\nlet socket;\n\n\nexport default class App extends Component {\n\n  constructor(props){\n    super(props);\n    this.state = {\n      username: null,\n      group: null,\n      endpoint: \"http://192.168.0.14:3005\",\n      messages: []\n\n    };\n    socket = socketIOClient(this.state.endpoint);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSendUsername = this.handleSendUsername.bind(this);\n    this.handleSendMessage = this.handleSendMessage.bind(this);\n    this.newMessage = this.newMessage.bind(this);\n  }\n\n  newMessage(msg){\n    const messages = [...this.state.messages];\n    if(messages === null) messages = [msg];\n    else messages.push(msg)\n    this.setState({messages: messages});\n  }\n  \n  componentDidMount(){\n    socket.on(\"new_message\", this.newMessage);\n  }\n\n  componentWillUnmount(){\n    socket.off(\"new_message\");\n  }\n\n  handleSendUsername(){\n\n    socket.emit(\"new_user\", this.state.username);\n  }\n\n  handleSendMessage(msg){\n    const data = {\n      \"message\": msg,\n      \"group\": this.state.group,\n      \"username\": this.state.username\n    };\n\n    socket.emit(\"send_message\", data);\n  }\n\n  handleChange(userName, lobby){\n    this.setState({username: userName, group: lobby}, () => {this.handleSendUsername()});\n  }\n\n  render() {\n    return (\n      <div className=\"main-page\">\n        <ChatPage \n        username={this.state.username} \n        group={this.state.group} \n        messages={this.state.messages}\n        handleSend={this.handleSendMessage}/>\n        <LoginModal handleChange={this.handleChange}/>\n      </div>\n    )\n  }\n}\n\n\n"]},"metadata":{},"sourceType":"module"}